<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sai2 Common: Sai2Common::LoopTimer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sai2 Common
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceSai2Common.html">Sai2Common</a></li><li class="navelem"><a class="el" href="classSai2Common_1_1LoopTimer.html">LoopTimer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classSai2Common_1_1LoopTimer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Sai2Common::LoopTimer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Accurately time a loop to set frequency.  
 <a href="classSai2Common_1_1LoopTimer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LoopTimer_8h_source.html">LoopTimer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afb854cdb5228ea3f5ba3613510389e41"><td class="memItemLeft" align="right" valign="top"><a id="afb854cdb5228ea3f5ba3613510389e41"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LoopTimer</b> (double frequency, unsigned int initial_wait_nanoseconds=0)</td></tr>
<tr class="separator:afb854cdb5228ea3f5ba3613510389e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2e06f37a8b78aeccd3a8a3d69c446b"><td class="memItemLeft" align="right" valign="top"><a id="a6b2e06f37a8b78aeccd3a8a3d69c446b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LoopTimer</b> (const <a class="el" href="classSai2Common_1_1LoopTimer.html">LoopTimer</a> &amp;)=delete</td></tr>
<tr class="separator:a6b2e06f37a8b78aeccd3a8a3d69c446b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadba4c08d6da8c44c1e1f08370e66ddd"><td class="memItemLeft" align="right" valign="top"><a id="aadba4c08d6da8c44c1e1f08370e66ddd"></a>
<a class="el" href="classSai2Common_1_1LoopTimer.html">LoopTimer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classSai2Common_1_1LoopTimer.html">LoopTimer</a> &amp;)=delete</td></tr>
<tr class="separator:aadba4c08d6da8c44c1e1f08370e66ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd3f21f6af243222d456d2779a52dc3"><td class="memItemLeft" align="right" valign="top"><a id="a3cd3f21f6af243222d456d2779a52dc3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setTimerName</b> (const std::string &amp;name)</td></tr>
<tr class="separator:a3cd3f21f6af243222d456d2779a52dc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d0371cb486f60bf1e641f278b3b13ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#a2d0371cb486f60bf1e641f278b3b13ee">resetLoopFrequency</a> (double frequency)</td></tr>
<tr class="memdesc:a2d0371cb486f60bf1e641f278b3b13ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the loop frequency.  <a href="classSai2Common_1_1LoopTimer.html#a2d0371cb486f60bf1e641f278b3b13ee">More...</a><br /></td></tr>
<tr class="separator:a2d0371cb486f60bf1e641f278b3b13ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905806e1b66674f0fb36db99477c3432"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#a905806e1b66674f0fb36db99477c3432">reinitializeTimer</a> (unsigned int initial_wait_nanoseconds=0)</td></tr>
<tr class="memdesc:a905806e1b66674f0fb36db99477c3432"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the timing loop, if using your own while loop. call before waitForLoop.  <a href="classSai2Common_1_1LoopTimer.html#a905806e1b66674f0fb36db99477c3432">More...</a><br /></td></tr>
<tr class="separator:a905806e1b66674f0fb36db99477c3432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6df3d12449c8611d90529d41c3a0efe"><td class="memItemLeft" align="right" valign="top"><a id="af6df3d12449c8611d90529d41c3a0efe"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#af6df3d12449c8611d90529d41c3a0efe">waitForNextLoop</a> ()</td></tr>
<tr class="memdesc:af6df3d12449c8611d90529d41c3a0efe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for next loop. Use in your while loop. Not needed if using <a class="el" href="classSai2Common_1_1LoopTimer.html#abf2ad6c380cba45045c0efca7861bf0f" title="Run a loop that calls the user_callback(). Blocking function.">LoopTimer::run()</a>. If overtine monitoring is enabled, this function will return false in case the overtime monitoring conditions are not satisfied and true otherwise. If no overtime monitoring is enabled, this will return true if the timer waited and false otherwise. <br /></td></tr>
<tr class="separator:af6df3d12449c8611d90529d41c3a0efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb8eb3bb3db8b40cdf486bf78770b63"><td class="memItemLeft" align="right" valign="top"><a id="a1eb8eb3bb3db8b40cdf486bf78770b63"></a>
unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#a1eb8eb3bb3db8b40cdf486bf78770b63">elapsedCycles</a> ()</td></tr>
<tr class="memdesc:a1eb8eb3bb3db8b40cdf486bf78770b63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of full loops completed since calling run. <br /></td></tr>
<tr class="separator:a1eb8eb3bb3db8b40cdf486bf78770b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad488e0f6aff2ed2b00c1865f34ed24c6"><td class="memItemLeft" align="right" valign="top"><a id="ad488e0f6aff2ed2b00c1865f34ed24c6"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#ad488e0f6aff2ed2b00c1865f34ed24c6">elapsedTime</a> ()</td></tr>
<tr class="memdesc:ad488e0f6aff2ed2b00c1865f34ed24c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elapsed computer time since calling initializeTimer() or <a class="el" href="classSai2Common_1_1LoopTimer.html#abf2ad6c380cba45045c0efca7861bf0f" title="Run a loop that calls the user_callback(). Blocking function.">run()</a> in seconds. <br /></td></tr>
<tr class="separator:ad488e0f6aff2ed2b00c1865f34ed24c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae49149367785b91814424884461bd8d4"><td class="memItemLeft" align="right" valign="top"><a id="ae49149367785b91814424884461bd8d4"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#ae49149367785b91814424884461bd8d4">elapsedSimTime</a> ()</td></tr>
<tr class="memdesc:ae49149367785b91814424884461bd8d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elapsed simulation time since calling initializeTimer() or <a class="el" href="classSai2Common_1_1LoopTimer.html#abf2ad6c380cba45045c0efca7861bf0f" title="Run a loop that calls the user_callback(). Blocking function.">run()</a> in seconds. <br /></td></tr>
<tr class="separator:ae49149367785b91814424884461bd8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3444aceee17ca39e92808876cc9074a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#ad3444aceee17ca39e92808876cc9074a">enableOvertimeMonitoring</a> (const double max_overtime_ms, const double max_average_overtime_ms, const double percentage_overtime_loops_allowed, const bool print_warning=false)</td></tr>
<tr class="memdesc:ad3444aceee17ca39e92808876cc9074a"><td class="mdescLeft">&#160;</td><td class="mdescRight">enables overtime monitoring. Allows a monitoring of the overtime of the loop and makes the function waitForNextLoop return false if: 1 - the latest loop overtime is higher than max_time_ms 2 - the average loop overtime is higher than max_average_time_ms 3 - the percentage of loops with overtime is higher than percentage_allowed  <a href="classSai2Common_1_1LoopTimer.html#ad3444aceee17ca39e92808876cc9074a">More...</a><br /></td></tr>
<tr class="separator:ad3444aceee17ca39e92808876cc9074a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a629d84781d791d854bff4709c1d12c60"><td class="memItemLeft" align="right" valign="top"><a id="a629d84781d791d854bff4709c1d12c60"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#a629d84781d791d854bff4709c1d12c60">printInfoPostRun</a> ()</td></tr>
<tr class="memdesc:a629d84781d791d854bff4709c1d12c60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the loop frequency and the average loop time. <br /></td></tr>
<tr class="separator:a629d84781d791d854bff4709c1d12c60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf2ad6c380cba45045c0efca7861bf0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#abf2ad6c380cba45045c0efca7861bf0f">run</a> (void(*userCallback)(void))</td></tr>
<tr class="memdesc:abf2ad6c380cba45045c0efca7861bf0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a loop that calls the user_callback(). Blocking function.  <a href="classSai2Common_1_1LoopTimer.html#abf2ad6c380cba45045c0efca7861bf0f">More...</a><br /></td></tr>
<tr class="separator:abf2ad6c380cba45045c0efca7861bf0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39e314f653a6e31da8bf87802ec4bde"><td class="memItemLeft" align="right" valign="top"><a id="af39e314f653a6e31da8bf87802ec4bde"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#af39e314f653a6e31da8bf87802ec4bde">stop</a> ()</td></tr>
<tr class="memdesc:af39e314f653a6e31da8bf87802ec4bde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the loop, started by <a class="el" href="classSai2Common_1_1LoopTimer.html#abf2ad6c380cba45045c0efca7861bf0f" title="Run a loop that calls the user_callback(). Blocking function.">run()</a>. Use within callback, or from a seperate thread. <br /></td></tr>
<tr class="separator:af39e314f653a6e31da8bf87802ec4bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac6485177a93d76aed91cac6a636f86a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#ac6485177a93d76aed91cac6a636f86a4">setCtrlCHandler</a> (void(*userCallback)(int))</td></tr>
<tr class="memdesc:ac6485177a93d76aed91cac6a636f86a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a ctr-c exit callback.  <a href="classSai2Common_1_1LoopTimer.html#ac6485177a93d76aed91cac6a636f86a4">More...</a><br /></td></tr>
<tr class="separator:ac6485177a93d76aed91cac6a636f86a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9e9e753896659303b20afced912914"><td class="memItemLeft" align="right" valign="top"><a id="a4e9e9e753896659303b20afced912914"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSai2Common_1_1LoopTimer.html#a4e9e9e753896659303b20afced912914">setThreadHighPriority</a> ()</td></tr>
<tr class="memdesc:a4e9e9e753896659303b20afced912914"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the thread to a priority of -19. Priority range is -20 (highest) to 19 (lowest) <br /></td></tr>
<tr class="separator:a4e9e9e753896659303b20afced912914"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Accurately time a loop to set frequency. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad3444aceee17ca39e92808876cc9074a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3444aceee17ca39e92808876cc9074a">&#9670;&nbsp;</a></span>enableOvertimeMonitoring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Sai2Common::LoopTimer::enableOvertimeMonitoring </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>max_overtime_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>max_average_overtime_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>percentage_overtime_loops_allowed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>print_warning</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>enables overtime monitoring. Allows a monitoring of the overtime of the loop and makes the function waitForNextLoop return false if: 1 - the latest loop overtime is higher than max_time_ms 2 - the average loop overtime is higher than max_average_time_ms 3 - the percentage of loops with overtime is higher than percentage_allowed </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_overtime_ms</td><td>maximum overtime allowed for a single loop in milliseconds </td></tr>
    <tr><td class="paramname">max_average_overtime_ms</td><td>maximum average overtime allowed for all loops in milliseconds </td></tr>
    <tr><td class="paramname">percentage_overtime_loops_allowed</td><td>maximum percentage of loops allowed to have overtime (between 0 and 100) </td></tr>
    <tr><td class="paramname">print_warning</td><td>whether to print a warning when one of the overtime monitor conditions is triggered (will slow down the program and worsen the overtimes) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a905806e1b66674f0fb36db99477c3432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a905806e1b66674f0fb36db99477c3432">&#9670;&nbsp;</a></span>reinitializeTimer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Sai2Common::LoopTimer::reinitializeTimer </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>initial_wait_nanoseconds</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the timing loop, if using your own while loop. call before waitForLoop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initial_wait_nanoseconds</td><td>The delay before waitForNextLoop will return the first time </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d0371cb486f60bf1e641f278b3b13ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d0371cb486f60bf1e641f278b3b13ee">&#9670;&nbsp;</a></span>resetLoopFrequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Sai2Common::LoopTimer::resetLoopFrequency </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>frequency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the loop frequency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frequency</td><td>The loop frequency that will be used for <a class="el" href="classSai2Common_1_1LoopTimer.html#abf2ad6c380cba45045c0efca7861bf0f" title="Run a loop that calls the user_callback(). Blocking function.">LoopTimer::run()</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abf2ad6c380cba45045c0efca7861bf0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf2ad6c380cba45045c0efca7861bf0f">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Sai2Common::LoopTimer::run </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>userCallback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a loop that calls the user_callback(). Blocking function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userCallback</td><td>A function to call every loop. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac6485177a93d76aed91cac6a636f86a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6485177a93d76aed91cac6a636f86a4">&#9670;&nbsp;</a></span>setCtrlCHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Sai2Common::LoopTimer::setCtrlCHandler </td>
          <td>(</td>
          <td class="paramtype">void(*)(int)&#160;</td>
          <td class="paramname"><em>userCallback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a ctr-c exit callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userCallback</td><td>A function to call when the user presses ctrl-c. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/sai2-common/sai2-common/src/timer/<a class="el" href="LoopTimer_8h_source.html">LoopTimer.h</a></li>
<li>/home/runner/work/sai2-common/sai2-common/src/timer/LoopTimer.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
